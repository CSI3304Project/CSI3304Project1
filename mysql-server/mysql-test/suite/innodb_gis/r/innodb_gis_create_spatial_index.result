SET GLOBAL innodb_file_format='barracuda';
SET innodb_strict_mode=ON;
CREATE TABLE tab(c1 int NOT NULL PRIMARY KEY,c2 POINT NOT NULL,
c3 LINESTRING NOT NULL,c4 POLYGON NOT NULL,c5 GEOMETRY NOT NULL) 
ENGINE=InnoDB ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;
CREATE SPATIAL INDEX idx1 on tab(c2 ASC);
CREATE SPATIAL INDEX idx2 on tab(c3 DESC) COMMENT 'wl6968';
CREATE SPATIAL INDEX idx3 on tab(c4 ASC) KEY_BLOCK_SIZE=8 ;
CREATE SPATIAL INDEX idx4 on tab(c5 DESC) KEY_BLOCK_SIZE=4 
COMMENT 'Spatial index on Geometry type column';
SHOW INDEXES FROM tab;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment
tab	0	PRIMARY	1	c1	A	0	NULL	NULL		BTREE		
tab	1	idx1	1	c2	A	0	32	NULL		SPATIAL		
tab	1	idx2	1	c3	A	0	32	NULL		SPATIAL		wl6968
tab	1	idx3	1	c4	A	0	32	NULL		SPATIAL		
tab	1	idx4	1	c5	A	0	32	NULL		SPATIAL		Spatial index on Geometry type column
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(1,GeomFromText('POINT(10 10)'),GeomFromText('LINESTRING(5 5,20 20,30 30)'),
GeomFromText('POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))'),
GeomFromText('POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(2,GeomFromText('POINT(20 20)'),GeomFromText('LINESTRING(20 20,30 30,40 40)'),
GeomFromText('POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))'),
GeomFromText('POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(3,GeomFromText('POINT(4 4)'),GeomFromText('LINESTRING(130 130,140 140,150 150)'),
GeomFromText('POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))'),
GeomFromText('POLYGON((4 -2,5 -4,6 -5,7 -4,7 2,4 -2))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(4,GeomFromText('POINT(50 50)'),GeomFromText('LINESTRING(200 200,300 300,400 400)'),
GeomFromText('POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))'),
GeomFromText('POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(5,GeomFromText('POINT(3 3)'),GeomFromText('LINESTRING(400 400,500 500,600 700)'),
GeomFromText('POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))'),
GeomFromText('POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(6,GeomFromText('POINT(3 3)'),GeomFromText('LINESTRING(40 40,50 50,60 70)'),
GeomFromText('POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))'),
GeomFromText('POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(7,GeomFromText('POINT(60 70)'),GeomFromText('LINESTRING(40 40,50 50,60 70)'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(8,GeomFromText('POINT(0 0)'),GeomFromText('LINESTRING(40 40,50 50,60 70)'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(9,GeomFromText('POINT(120 120)'),GeomFromText('LINESTRING(100 100,110 110,120 120)'),
GeomFromText('POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))'),
GeomFromText('POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(10,GeomFromText('POINT(160 160)'),GeomFromText('LINESTRING(140 140,150 150,160 160)'),
GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))'),
GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))'));
SET @g1 = GeomFromText( 'POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrcontains(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 300 300,400 400)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrcontains(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Contains(tab.c4, @g1);
c1	Astext(c4)
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((30 30,40 40,50 50,30 50,30 40,30 30)) ');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Within(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrwithin(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Within(tab.c4, @g1);
c1	Astext(c4)
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Within(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Within(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((100 200,200 300,400 500,500 300,300 200,100 300,100 200))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_crosses(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Crosses(tab.c4, @g1);
c1	Astext(c4)
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 10 10,30 30,40 40)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE CRosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_crosses(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Crosses(tab.c4, @g1);
c1	Astext(c4)
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((4 -2,5 -4,6 -5,7 -4,7 2,4 -2))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Disjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrdisjoint(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Disjoint(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
9	POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))
8	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
7	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
6	POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))
5	POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Disjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Disjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Equals(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrequals(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Equals(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Equals(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Equals(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Intersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 30 30,40 40,50 50)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Intersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 2,4 5,5 5,7 1,0 0 ))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbroverlaps(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Overlaps(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING(7 1,30 30,1010 3010,1010 2010,3010 3010,4010 4010,5010 5010 )');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbroverlaps(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Overlaps(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_touches(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Touches(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,70 50,80 80,70 100,50 100,40 70,40 50))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 100 100,200 200,300 300)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_touches(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Touches(tab.c4, @g1);
c1	Astext(c4)
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRContains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrcontains(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRContains(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRContains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRContains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((30 30,40 40,50 50,30 50,30 40,30 30)) ');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRWithin(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrwithin(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRWithin(tab.c4, @g1);
c1	Astext(c4)
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRWithin(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRWithin(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((4 -2,5 -4,6 -5,7 -4,7 2,4 -2))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRDisjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrdisjoint(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRDisjoint(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
9	POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))
8	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
7	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
6	POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))
5	POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRDisjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRDisjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBREqual(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrequals(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBREqual(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBREqual(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBREqual(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRIntersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRIntersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 30 30,40 40,50 50)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRIntersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  MBRIntersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 2,4 5,5 5,7 1,0 0 ))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBROverlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbroverlaps(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBROverlaps(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBROverlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBROverlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRTouches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_touches(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRTouches(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,70 50,80 80,70 100,50 100,40 70,40 50))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRTouches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRTouches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
CREATE PROCEDURE proc_wl6968()
BEGIN
SET @g1 = GeomFromText( 'POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Contains(tab.c4, @g1);
EXPLAIN DELETE FROM tab WHERE Contains(tab.c4, @g1);
END |
CALL proc_wl6968();
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))');
SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
DELETE FROM tab WHERE Contains(tab.c4, @g1);
SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
c1	Astext(c4)
CHECK TABLE tab;
Table	Op	Msg_type	Msg_text
test.tab	check	status	OK
SET @g1 = GeomFromText('LINESTRING( 300 300,400 400)');
SELECT c1,Astext(c4) FROM tab WHERE  Contains(tab.c4, @g1);
c1	Astext(c4)
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
DELETE FROM tab WHERE Contains(tab.c4, @g1);
SELECT c1,Astext(c4) FROM tab WHERE  Contains(tab.c4, @g1);
c1	Astext(c4)
CHECK TABLE tab;
Table	Op	Msg_type	Msg_text
test.tab	check	status	OK
SET @g1 = GeomFromText('POLYGON((100 200,1010 1010,1020 1020,500 300,300 200,100 300,100 200))');
SELECT c1,Astext(c4) FROM tab WHERE Crosses(tab.c4, @g1);
c1	Astext(c4)
DELETE FROM tab WHERE Crosses(tab.c4, @g1);
SELECT c1,Astext(c4) FROM tab WHERE Crosses(tab.c4, @g1);
c1	Astext(c4)
CHECK TABLE tab;
Table	Op	Msg_type	Msg_text
test.tab	check	status	OK
SET @g1 = GeomFromText('POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))');
SET @g2 = GeomFromText( 'POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))');
UPDATE tab SET C4 = @g2  WHERE Crosses(tab.c4, @g1);
SELECT c1,Astext(c4) FROM tab WHERE  Crosses(tab.c4, @g2);
c1	Astext(c4)
CHECK TABLE tab;
Table	Op	Msg_type	Msg_text
test.tab	check	status	OK
DROP TABLE tab;
DROP PROCEDURE proc_wl6968;
CREATE TABLE tab(c1 int ,c2 POINT NOT NULL,
c3 LINESTRING NOT NULL,c4 POLYGON NOT NULL,c5 GEOMETRY NOT NULL) 
ENGINE=InnoDB ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE SPATIAL INDEX idx1 on tab(c2 ASC);
CREATE SPATIAL INDEX idx2 on tab(c3 DESC) COMMENT 'wl6968';
CREATE SPATIAL INDEX idx3 on tab(c4 ASC) KEY_BLOCK_SIZE=2 ;
CREATE SPATIAL INDEX idx4 on tab(c5 DESC) KEY_BLOCK_SIZE=8 
COMMENT 'Spatial index on Geometry type column';
SHOW INDEXES FROM tab;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment
tab	1	idx1	1	c2	A	0	32	NULL		SPATIAL		
tab	1	idx2	1	c3	A	0	32	NULL		SPATIAL		wl6968
tab	1	idx3	1	c4	A	0	32	NULL		SPATIAL		
tab	1	idx4	1	c5	A	0	32	NULL		SPATIAL		Spatial index on Geometry type column
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(1,GeomFromText('POINT(10 10)'),GeomFromText('LINESTRING(5 5,20 20,30 30)'),
GeomFromText('POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))'),
GeomFromText('POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(2,GeomFromText('POINT(20 20)'),GeomFromText('LINESTRING(20 20,30 30,40 40)'),
GeomFromText('POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))'),
GeomFromText('POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(3,GeomFromText('POINT(4 4)'),GeomFromText('LINESTRING(130 130,140 140,150 150)'),
GeomFromText('POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))'),
GeomFromText('POLYGON((4 -2,5 -4,6 -5,7 -4,7 2,4 -2))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(4,GeomFromText('POINT(50 50)'),GeomFromText('LINESTRING(200 200,300 300,400 400)'),
GeomFromText('POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))'),
GeomFromText('POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(5,GeomFromText('POINT(3 3)'),GeomFromText('LINESTRING(400 400,500 500,600 700)'),
GeomFromText('POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))'),
GeomFromText('POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(6,GeomFromText('POINT(3 3)'),GeomFromText('LINESTRING(40 40,50 50,60 70)'),
GeomFromText('POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))'),
GeomFromText('POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(7,GeomFromText('POINT(60 70)'),GeomFromText('LINESTRING(40 40,50 50,60 70)'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(8,GeomFromText('POINT(0 0)'),GeomFromText('LINESTRING(40 40,50 50,60 70)'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(9,GeomFromText('POINT(120 120)'),GeomFromText('LINESTRING(100 100,110 110,120 120)'),
GeomFromText('POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))'),
GeomFromText('POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))'));
INSERT INTO tab(c1,c2,c3,c4,c5) 
VALUES(10,GeomFromText('POINT(160 160)'),GeomFromText('LINESTRING(140 140,150 150,160 160)'),
GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))'),
GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))'));
SET @g1 = GeomFromText( 'POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrcontains(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 300 300,400 400)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrcontains(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Contains(tab.c4, @g1);
c1	Astext(c4)
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((30 30,40 40,50 50,30 50,30 40,30 30)) ');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Within(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrwithin(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Within(tab.c4, @g1);
c1	Astext(c4)
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Within(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Within(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((100 200,200 300,400 500,500 300,300 200,100 300,100 200))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_crosses(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Crosses(tab.c4, @g1);
c1	Astext(c4)
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 10 10,30 30,40 40)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE CRosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_crosses(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Crosses(tab.c4, @g1);
c1	Astext(c4)
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((4 -2,5 -4,6 -5,7 -4,7 2,4 -2))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Disjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrdisjoint(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Disjoint(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
9	POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))
8	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
7	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
6	POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))
5	POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Disjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Disjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Equals(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrequals(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Equals(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Equals(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Equals(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Intersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 30 30,40 40,50 50)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Intersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 2,4 5,5 5,7 1,0 0 ))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbroverlaps(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Overlaps(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING(7 1,30 30,1010 3010,1010 2010,3010 3010,4010 4010,5010 5010 )');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbroverlaps(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Overlaps(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_touches(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Touches(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,70 50,80 80,70 100,50 100,40 70,40 50))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 100 100,200 200,300 300)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_touches(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Touches(tab.c4, @g1);
c1	Astext(c4)
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRContains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrcontains(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRContains(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRContains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRContains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((30 30,40 40,50 50,30 50,30 40,30 30)) ');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRWithin(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrwithin(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRWithin(tab.c4, @g1);
c1	Astext(c4)
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRWithin(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRWithin(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((4 -2,5 -4,6 -5,7 -4,7 2,4 -2))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRDisjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrdisjoint(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRDisjoint(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
9	POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))
8	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
7	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
6	POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))
5	POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRDisjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRDisjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBREqual(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrequals(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBREqual(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBREqual(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBREqual(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRIntersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRIntersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 30 30,40 40,50 50)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRIntersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  MBRIntersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 2,4 5,5 5,7 1,0 0 ))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBROverlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbroverlaps(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBROverlaps(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBROverlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBROverlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRTouches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_touches(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRTouches(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,70 50,80 80,70 100,50 100,40 70,40 50))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRTouches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRTouches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
CREATE PROCEDURE proc_wl6968()
BEGIN
SET @g1 = GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBREqual(tab.c4, @g1);
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBREqual(tab.c4, @g1);
EXPLAIN DELETE FROM tab WHERE MBREqual(tab.c4, @g1);
END |
CALL proc_wl6968();
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((30 30,40 40,50 50,30 50,30 40,30 30)) ');
SELECT c1,Astext(c4) FROM tab WHERE Within(tab.c4, @g1);
c1	Astext(c4)
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
DELETE FROM tab WHERE Within(tab.c4, @g1);
SELECT c1,Astext(c4) FROM tab WHERE Within(tab.c4, @g1);
c1	Astext(c4)
CHECK TABLE tab;
Table	Op	Msg_type	Msg_text
test.tab	check	status	OK
SET @g1 = GeomFromText('POLYGON((100 200,200 300,400 500,500 300,300 200,100 300,100 200))');
SELECT c1,Astext(c4) FROM tab WHERE Crosses(tab.c4, @g1);
c1	Astext(c4)
DELETE FROM tab WHERE Crosses(tab.c4, @g1);
SELECT c1,Astext(c4) FROM tab WHERE Crosses(tab.c4, @g1);
c1	Astext(c4)
SET @g1 = GeomFromText( 'POLYGON((0 0,0 2,4 5,5 5,7 1,0 0 ))');
SET @g2 = GeomFromText( 'POLYGON((1 1,2 2,3 3,10 3,5 1,1 1))');
UPDATE tab SET C4 = @g2  WHERE Overlaps(tab.c4, @g1);
SELECT c1,Astext(c4) FROM tab WHERE  Overlaps(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((1 1,2 2,3 3,10 3,5 1,1 1))
CHECK TABLE tab;
Table	Op	Msg_type	Msg_text
test.tab	check	status	OK
DROP TABLE tab;
DROP PROCEDURE proc_wl6968;
CREATE TABLE tab(c1 int AUTO_INCREMENT PRIMARY KEY,c2 POINT NOT NULL,
c3 LINESTRING NOT NULL,c4 POLYGON NOT NULL,c5 GEOMETRY NOT NULL) 
ENGINE=InnoDB ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE SPATIAL INDEX idx1 on tab(c2 ASC);
CREATE SPATIAL INDEX idx2 on tab(c3 DESC) COMMENT 'wl6968';
CREATE SPATIAL INDEX idx3 on tab(c4 ASC) KEY_BLOCK_SIZE=16 ;
CREATE SPATIAL INDEX idx4 on tab(c5 DESC) KEY_BLOCK_SIZE=16 
COMMENT 'Spatial index on Geometry type column';
SHOW INDEXES FROM tab;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment
tab	0	PRIMARY	1	c1	A	0	NULL	NULL		BTREE		
tab	1	idx1	1	c2	A	0	32	NULL		SPATIAL		
tab	1	idx2	1	c3	A	0	32	NULL		SPATIAL		wl6968
tab	1	idx3	1	c4	A	0	32	NULL		SPATIAL		
tab	1	idx4	1	c5	A	0	32	NULL		SPATIAL		Spatial index on Geometry type column
INSERT INTO tab(c2,c3,c4,c5) 
VALUES(GeomFromText('POINT(10 10)'),GeomFromText('LINESTRING(5 5,20 20,30 30)'),
GeomFromText('POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))'),
GeomFromText('POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))'));
INSERT INTO tab(c2,c3,c4,c5) 
VALUES(GeomFromText('POINT(20 20)'),GeomFromText('LINESTRING(20 20,30 30,40 40)'),
GeomFromText('POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))'),
GeomFromText('POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))'));
INSERT INTO tab(c2,c3,c4,c5) 
VALUES(GeomFromText('POINT(4 4)'),GeomFromText('LINESTRING(130 130,140 140,150 150)'),
GeomFromText('POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))'),
GeomFromText('POLYGON((4 -2,5 -4,6 -5,7 -4,7 2,4 -2))'));
INSERT INTO tab(c2,c3,c4,c5) 
VALUES(GeomFromText('POINT(50 50)'),GeomFromText('LINESTRING(200 200,300 300,400 400)'),
GeomFromText('POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))'),
GeomFromText('POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))'));
INSERT INTO tab(c2,c3,c4,c5) 
VALUES(GeomFromText('POINT(3 3)'),GeomFromText('LINESTRING(400 400,500 500,600 700)'),
GeomFromText('POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))'),
GeomFromText('POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))'));
INSERT INTO tab(c2,c3,c4,c5) 
VALUES(GeomFromText('POINT(3 3)'),GeomFromText('LINESTRING(40 40,50 50,60 70)'),
GeomFromText('POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))'),
GeomFromText('POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))'));
INSERT INTO tab(c2,c3,c4,c5) 
VALUES(GeomFromText('POINT(60 70)'),GeomFromText('LINESTRING(40 40,50 50,60 70)'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'));
INSERT INTO tab(c2,c3,c4,c5) 
VALUES(GeomFromText('POINT(0 0)'),GeomFromText('LINESTRING(40 40,50 50,60 70)'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'),
GeomFromText('POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))'));
INSERT INTO tab(c2,c3,c4,c5) 
VALUES(GeomFromText('POINT(120 120)'),GeomFromText('LINESTRING(100 100,110 110,120 120)'),
GeomFromText('POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))'),
GeomFromText('POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))'));
INSERT INTO tab(c2,c3,c4,c5) 
VALUES(GeomFromText('POINT(160 160)'),GeomFromText('LINESTRING(140 140,150 150,160 160)'),
GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))'),
GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))'));
SET @g1 = GeomFromText( 'POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrcontains(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 300 300,400 400)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrcontains(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Contains(tab.c4, @g1);
c1	Astext(c4)
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Contains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((30 30,40 40,50 50,30 50,30 40,30 30)) ');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Within(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrwithin(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Within(tab.c4, @g1);
c1	Astext(c4)
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Within(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Within(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((100 200,200 300,400 500,500 300,300 200,100 300,100 200))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_crosses(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Crosses(tab.c4, @g1);
c1	Astext(c4)
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 10 10,30 30,40 40)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE CRosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_crosses(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Crosses(tab.c4, @g1);
c1	Astext(c4)
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Crosses(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((4 -2,5 -4,6 -5,7 -4,7 2,4 -2))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Disjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrdisjoint(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Disjoint(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
9	POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))
8	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
7	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
6	POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))
5	POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Disjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Disjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Equals(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrequals(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Equals(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Equals(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Equals(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Intersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 30 30,40 40,50 50)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Intersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE intersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 2,4 5,5 5,7 1,0 0 ))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbroverlaps(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Overlaps(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING(7 1,30 30,1010 3010,1010 2010,3010 3010,4010 4010,5010 5010 )');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbroverlaps(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Overlaps(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Overlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_touches(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE Touches(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,70 50,80 80,70 100,50 100,40 70,40 50))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 100 100,200 200,300 300)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_touches(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  Touches(tab.c4, @g1);
c1	Astext(c4)
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE Touches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRContains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrcontains(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRContains(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRContains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRContains(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((30 30,40 40,50 50,30 50,30 40,30 30)) ');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRWithin(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrwithin(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRWithin(tab.c4, @g1);
c1	Astext(c4)
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRWithin(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRWithin(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((4 -2,5 -4,6 -5,7 -4,7 2,4 -2))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRDisjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrdisjoint(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRDisjoint(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
9	POLYGON((4010 4010,4020 4020,4030 4030,4040 4030,4020 4010,4010 4010))
8	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
7	POLYGON((3010 3010,3020 3020,3030 3030,3040 3030,3020 3010,3010 3010))
6	POLYGON((2010 2010,2020 2020,2030 2030,2040 2030,2020 2010,2010 2010))
5	POLYGON((1010 1010,1020 1020,1030 1030,1040 1030,1020 1010,1010 1010))
4	POLYGON((300 300,400 400,500 500,300 500,300 400,300 300))
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRDisjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRDisjoint(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBREqual(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrequals(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBREqual(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBREqual(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBREqual(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRIntersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRIntersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('LINESTRING( 30 30,40 40,50 50)');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRIntersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbrintersects(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE  MBRIntersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRintersects(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 2,4 5,5 5,7 1,0 0 ))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBROverlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where mbroverlaps(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBROverlaps(tab.c4, @g1);
c1	Astext(c4)
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBROverlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBROverlaps(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
EXPLAIN SELECT c1,Astext(c4) FROM tab WHERE MBRTouches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	tab	NULL	range	idx3	idx3	34	NULL	2	100.00	Using where
Warnings:
Note	1003	/* select#1 */ select `test`.`tab`.`c1` AS `c1`,st_astext(`test`.`tab`.`c4`) AS `Astext(c4)` from `test`.`tab` where st_touches(`test`.`tab`.`c4`,(@`g1`))
SELECT c1,Astext(c4) FROM tab WHERE MBRTouches(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,70 50,80 80,70 100,50 100,40 70,40 50))
EXPLAIN UPDATE tab SET C2 = GeomFromText('POINT(0 0)') 
WHERE MBRTouches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	UPDATE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
EXPLAIN DELETE FROM tab WHERE MBRTouches(tab.c4, @g1);
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	DELETE	tab	NULL	range	idx3	idx3	34	const	2	100.00	Using where
SET @g1 = GeomFromText('POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))');
SELECT c1,Astext(c4) FROM tab WHERE Equals(tab.c4, @g1);
c1	Astext(c4)
10	POLYGON((5010 5010,5020 5020,5030 5030,5040 5030,5020 5010,5010 5010))
DELETE FROM tab WHERE Equals(tab.c4, @g1);
SELECT c1,Astext(c4) FROM tab WHERE Equals(tab.c4, @g1);
c1	Astext(c4)
CHECK TABLE tab;
Table	Op	Msg_type	Msg_text
test.tab	check	status	OK
SET @g1 = GeomFromText( 'POLYGON((0 0,0 30,30 40,40 50,50 30,0 0))');
SELECT c1,Astext(c4) FROM tab WHERE Intersects(tab.c4, @g1);
c1	Astext(c4)
2	POLYGON((40 50,40 70,50 100,70 100,80 80,70 50,40 50))
1	POLYGON((30 30,40 40,50 50,30 50,30 40,30 30))
3	POLYGON((7 1,6 2,6 3,10 3,10 1,7 1))
DELETE FROM tab WHERE Intersects(tab.c4, @g1);
SELECT c1,Astext(c4) FROM tab WHERE Intersects(tab.c4, @g1);
c1	Astext(c4)
CHECK TABLE tab;
Table	Op	Msg_type	Msg_text
test.tab	check	status	OK
DROP TABLE tab;
CREATE TABLE tab(c1 POINT NOT NULL,CONSTRAINT tab_const check(c1 > 0) ) ENGINE=InnoDB;
CREATE SPATIAL INDEX idx1 ON tab(c1) ;
SHOW CREATE TABLE tab;
Table	Create Table
tab	CREATE TABLE `tab` (
  `c1` point NOT NULL,
  SPATIAL KEY `idx1` (`c1`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1
SHOW INDEX FROM tab;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment
tab	1	idx1	1	c1	A	0	32	NULL		SPATIAL		
set @g1 = GeomFromText('POINT(-1 -2))');
SELECT AsText(c1) FROM tab;
AsText(c1)
DROP table tab;
SET GLOBAL innodb_file_format=Default;
SET innodb_strict_mode=Default;
